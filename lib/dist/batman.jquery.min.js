var k=true,p=null,s=false;function A(){return function(){}}
(function(){function v(a,b){return function(){return a.apply(b,arguments)}}function w(a,b){function c(){this.constructor=a}for(var e in b)if(aa.call(b,e))a[e]=b[e];c.prototype=b.prototype;a.prototype=new c;a.e=b.prototype;return a}var E,F,N,G,H,z,D,I,B,O,d,J,P,Q,C,R,t,x,S,T,U,V,W,X,Y,Z,K,q=Array.prototype.slice,aa=Object.prototype.hasOwnProperty,ba=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1};d=function(){var a;a=1<=arguments.length?q.call(arguments,
0):[];return function(b,c,e){e.prototype=b.prototype;e=new e;b=b.apply(e,c);return typeof b==="object"?b:e}(d.a,a,A())};d.jd=B=function(a){return Z.call(a).slice(8,-1)};Z=Object.prototype.toString;d.u=z=function(){var a,b,c,e,f,g,h,i,j;g=arguments[0];e=2<=arguments.length?q.call(arguments,1):[];f=g.d;a=typeof f==="function";i=0;for(j=e.length;i<j;i++){c=e[i];if(B(c)==="Object")for(b in c){h=c[b];if(!(b==="initialize"||b==="uninitialize"||b==="prototype"))if(a)f.call(g,b,h);else g[b]=h}}return g};
G=function(a,b,c){return a[b]=c};d.kd=O=function(){var a,b,c,e,f,g;a=arguments[0];e=2<=arguments.length?q.call(arguments,1):[];f=0;for(g=e.length;f<g;f++){c=e[f];for(b in c)if(!(b==="initialize"||b==="uninitialize")){a[b]=p;delete a[b]}typeof c.Ub==="function"&&c.Ub.call(a)}return a};d.Hc=E=function(a){return function(){var b,c,e;b=1<=arguments.length?q.call(arguments,0):[];c=this;e=function(f){b.push(f);return a.apply(c,b)};return typeof b[b.length-1]==="function"?e(b.pop()):e}};d.Ic=H=function(a,
b){var c,e;if(!a.lb)for(c in b){e=b[c];if(e===a){a.lb=c;break}}return a.lb};d.v=function(){function a(b,c){this.m=b;this.key=c}a.jb={b:function(b){return this[b]},d:function(b,c){return this[b]=c},C:function(b){this[b]=p;delete this[b]}};a.ba=p;a["for"]=function(b,c){var e,f;if(b.c){d.p(b);e=(f=b.c).wb||(f.wb=new d.h);return e.b(c)||e.d(c,new this(b,c))}else return new this(b,c)};a.prototype.k=function(){var b,c,e,f,g;b=this.key;g=d.D(this.m,"keyAccessors");e=0;for(f=g.length;e<f;e++){c=g[e];if(c=
c.b(b))return c}return d.Za(this.m,"defaultAccessor")||d.v.jb};a.prototype.zb=function(){var b;if(b=d.v.ba)return b.add(this)};a.prototype.o=function(){var b;this.zb();return(b=this.k())!=p?b.b.call(this.m,this.key):void 0};a.prototype.M=function(b){var c;return(c=this.k())!=p?c.d.call(this.m,this.key,b):void 0};a.prototype.O=function(){var b;return(b=this.k())!=p?b.C.call(this.m,this.key):void 0};a.prototype.isEqual=function(b){return this.constructor===b.constructor&&this.m===b.m&&this.key===b.key};
return a}();d.Eb=function(){function a(){a.e.constructor.apply(this,arguments);this.G=new d.f;this.V()&&this.La();this.ga=0}w(a,d.v);a.prototype.M=function(b){this.gb();a.e.M.apply(this,arguments);this.ob();return b};a.prototype.O=function(){this.gb();a.e.O.apply(this,arguments);this.ob()};a.prototype.gb=function(){if(this.z)return this.z.j(function(b){return b.Rb=b.o()})};a.prototype.ob=function(){if(this.z)return this.z.j(function(b){if(typeof b.V==="function"?b.V():void 0)return b.s(b.o(),b.Rb)})};
a.prototype.i=function(){var b,c,e;e=2<=arguments.length?q.call(arguments,0,b=arguments.length-1):(b=0,[]);b=arguments[b++];e=e[0]===k;c=this.o();this.G.add(b);this.La();e&&b.call(this.m,c,c);return this};a.prototype.V=function(){var b;if(this.G.length>0)return k;if(this.m===this.m.constructor.prototype)return s;return(typeof(b=this.m.constructor).prototype.l==="function"?b.prototype.l(this.key).G.length:void 0)>0};a.prototype.jc=function(){return this.ga++};a.prototype.Ob=function(){if(this.ga>0)return this.ga--};
a.prototype.ac=function(){return this.ga<=0};a.prototype.s=function(){var b,c,e,f,g,h,i;b=1<=arguments.length?q.call(arguments,0):[];if(this.V()){e=this.key;c=this.m;g=[this.G].concat(d.D(this.m).map(function(j){return j!=p?typeof j.l==="function"?j.l(e).G:void 0:void 0}));h=0;for(i=g.length;h<i;h++){f=g[h];f!=p&&f.j(function(j){return j!=p?j.apply(c,b):void 0})}return this.La()}};a.prototype.U=function(b){if(b)this.G.remove(b);else this.G=new d.f;if(!this.V())return this.Tb()};a.prototype.La=function(){d.v.ba=
new d.f;this.o();this.ca&&this.ca.j(v(function(b){var c;if(!d.v.ba.pb(b))return(c=b.z)!=p?c.remove(this):void 0},this));this.ca=d.v.ba;this.ca.j(v(function(b){b.z||(b.z=new d.f);return b.z.add(this)},this));return d.v.ba=p};a.prototype.Tb=function(){this.ca.j(v(function(b){return b.z.remove(this)},this));return this.ca=new d.f};return a}();d.ra=function(){function a(b,c){if(B(c)==="String"){this.oa=c.split(".");this.la=this.oa.length}else{this.oa=[c];this.la=1}a.e.constructor.apply(this,arguments)}
w(a,d.Eb);a.prototype.slice=function(b,c){var e,f,g,h,i;e=this.m;i=this.oa.slice(0,b);g=0;for(h=i.length;g<h;g++){f=i[g];if(!(e!=p&&(e=d.ra["for"](e,f).o())))return}return d.ra["for"](e,this.oa.slice(b,c).join("."))};a.prototype.Oa=function(){return this.slice(-1)};a.prototype.o=function(){var b;this.zb();return this.la===1?a.e.o.apply(this,arguments):(b=this.Oa())!=p?b.o():void 0};a.prototype.M=function(b){var c;return this.la===1?a.e.M.apply(this,arguments):(c=this.Oa())!=p?c.M(b):void 0};a.prototype.O=
function(){var b;return this.la===1?a.e.O.apply(this,arguments):(b=this.Oa())!=p?b.O():void 0};return a}();d.Q={Yc:k,l:function(a){d.p(this);return d.ra["for"](this,a)},b:function(a){return this.l(a).o()},d:function(a,b){return this.l(a).M(b)},C:function(a){return this.l(a).O()},i:function(){var a,b,c;b=arguments[0];a=2<=arguments.length?q.call(arguments,1):[];(c=this.l(b)).i.apply(c,a);return this},s:function(){var a,b,c;b=arguments[0];a=2<=arguments.length?q.call(arguments,1):[];return(c=this.l(b)).s.apply(c,
a)},U:function(a,b){a?this.l(a).U(b):this.c.wb.j(function(c,e){return e.U()});return this},Y:function(a){this.l(a).jc();return this},S:function(a){this.l(a).Ob();return this},Pb:function(a){return this.l(a).ac()}};d.qa={event:E(function(a,b,c){var e;if(!c&&typeof b!=="undefined"){c=b;b=p}if(!c&&B(a)!=="String"){c=a;a=p}e=function(f){var g,h,i,j;if(!this.i)throw"EventEmitter requires Observable";d.p(this);a||(a=H(e,this));h=(j=this.c.$a)!=p?j[a]:void 0;if(typeof f==="function"){this.i(a,f);if(e.W&&
h)return f.apply(this,e.Ya)}else if(this.Pb(a)){if(e.W&&h)return s;h=c!=p?c.apply(this,arguments):void 0;if(h!==s){e.Ya=typeof h!=="undefined"?(g=[h]).concat.apply(g,arguments):arguments.length===0?[]:Array.prototype.slice.call(arguments);g=Array.prototype.slice.call(e.Ya);g.unshift(a);this.s.apply(this,g);if(e.W){g=(i=this.c).$a||(i.$a={});g[a]=k}}return h}else return s};if(b)e=e.ia(b);if(a!=p)this[a]=e;return z(e,{Xc:k,action:c,W:this.W})}),Ba:function(){return z(d.qa.event.apply(this,arguments),
{W:k})}};F=function(a){var b;b=new d.a;return b.event("_event",b,a)};N=function(a){var b;b=new d.a;return b.Ba("_event",b,a)};d.w={Ea:function(){d.p(this);if(!this.c.Ab){this.c.Ab={};return this.k("state",{b:function(){return this.t()},d:function(a,b){return K.call(this,b)}})}},t:function(a,b){var c;d.w.Ea.call(this);if(!a)return d.Za(this,"state");if(!this.event)throw"StateMachine requires EventEmitter";c=this[a]||this.event(a,function(){K.call(this,a);return s});typeof b==="function"&&c.call(this,
b);return c},vc:function(a,b,c){d.w.Ea.call(this);this.t(a);this.t(b);a=""+a+"->"+b;b=this.c.Ab;a=b[a]||(b[a]=F(A()));c&&a(c);return a}};d.w.state=d.w.t;d.w.transition=d.w.vc;K=function(a){var b,c,e,f,g,h;d.w.Ea.call(this);if(this.c.qb){((c=this.c).Ia||(c.Ia=[])).push(a);return s}this.c.qb=k;c=this.t();if((this.c.t=a)&&c){b=""+c+"->"+a;g=d.D(this,"states",b);e=0;for(f=g.length;e<f;e++)(b=g[e])&&b(a,c)}a&&this.s(a,a,c);this.c.qb=s;if((h=this.c.Ia)!=p?h.length:void 0)this[this.c.Ia.shift()]();return a};
d.p=function(a){var b;if(a.prototype&&((b=a.c)!=p?b.Hb:void 0)!==a)return a.c={Hb:a};else if(!a.hasOwnProperty("_batman"))return a.c={}};d.Za=function(a,b){var c,e,f,g,h;if(e=(c=a.c)!=p?c[b]:void 0)return e;for(c=a.constructor;c;){if(e=(f=c.prototype)!=p?(g=f.c)!=p?g[b]:void 0:void 0)return e;c=(h=c.e)!=p?h.constructor:void 0}};d.D=function(a,b,c){var e,f,g,h,i,j,l,m;f=[];if(g=(e=a.c)!=p?e[b]:void 0)f.push(g);for(a=(e=!!a.prototype)?(h=a.e)!=p?h.constructor:void 0:a.constructor;a;){if(b)if(e&&(g=
(i=a.c)!=p?i[b]:void 0))f.push(g);else{if(!e&&(g=(j=a.prototype)!=p?(l=j.c)!=p?l[b]:void 0:void 0))f.push(g)}else f.push(a.prototype);a=(m=a.e)!=p?m.constructor:void 0}return c?f.map(function(n){return n[c]}):f};d.a=function(){function a(){var b;b=1<=arguments.length?q.call(arguments,0):[];d.p(this);this.u.apply(this,b)}a.global=function(b){if(b!==s)return C[this.name]=this};a.u=function(){var b;b=1<=arguments.length?q.call(arguments,0):[];return z.apply(p,[this].concat(q.call(b)))};a.prototype.u=
a.u;a.k=function(){var b,c,e,f,g,h;e=2<=arguments.length?q.call(arguments,0,b=arguments.length-1):(b=0,[]);b=arguments[b++];d.p(this);if(e.length===0)if(b.b||b.d)return this.c.defaultAccessor=b;else{(f=this.c).keyAccessors||(f.keyAccessors=new d.h);f=[];for(c in b){e=b[c];this.c.keyAccessors.d(c,{b:e,d:e});f.push(this[c]=e)}return f}else{(g=this.c).keyAccessors||(g.keyAccessors=new d.h);h=[];f=0;for(g=e.length;f<g;f++){c=e[f];h.push(this.c.keyAccessors.d(c,b))}return h}};a.prototype.k=a.k;a["export"]=
function(){return G.apply(p,[this].concat(q.call(arguments)))};a.prototype["export"]=function(){return G.apply(p,[this].concat(q.call(arguments)))};a.u(d.Q,d.qa);a.prototype.u(d.Q,d.qa);return a}();d.a.get=d.a.b;d.a.set=d.a.d;d.a.observe=d.a.i;d.a.fire=d.a.s;d.a.forget=d.a.U;d.a.prevent=d.a.Y;d.a.allow=d.a.S;d.a.prototype.get=d.a.prototype.b;d.a.prototype.set=d.a.prototype.d;d.a.prototype.observe=d.a.prototype.i;d.a.prototype.fire=d.a.prototype.s;d.a.prototype.forget=d.a.prototype.U;d.a.prototype.prevent=
d.a.prototype.Y;d.a.prototype.allow=d.a.prototype.S;d.SimpleHash=d.h=function(){function a(){this.n={};this.length=0}a.prototype.Da=function(b){return typeof this.b(b)!=="undefined"};a.prototype.b=function(b){var c,e,f,g,h;if(b==="length")return this.length;if(c=this.n[b]){g=0;for(h=c.length;g<h;g++){f=c[g];e=f[0];f=f[1];if(this.za(e,b))return f}}};a.prototype.d=function(b,c){var e,f,g,h,i;f=(e=this.n)[b]||(e[b]=[]);h=0;for(i=f.length;h<i;h++){e=f[h];if(this.za(e[0],b))g=e}if(!g){g=[b];f.push(g)}return g[1]=
c};a.prototype.C=function(b){var c,e,f,g;if(e=this.n[b]){c=0;for(g=e.length;c<g;c++){f=e[c];f=f[0];if(this.za(f,b)){e.splice(c,1);break}}}};a.prototype.za=function(b,c){return typeof b.isEqual==="function"?b.isEqual(c):typeof c.isEqual==="function"?c.isEqual(b):b===c};a.prototype.j=function(b){var c,e,f,g,h,i;h=this.n;i=[];for(c in h){g=h[c];i.push(function(){var j,l,m,n;n=[];j=0;for(l=g.length;j<l;j++){m=g[j];e=m[0];f=m[1];n.push(b(e,f))}return n}())}return i};a.prototype.J=function(){var b;b=[];
this.j(function(c){return b.push(c)});return b};a.prototype.clear=function(){return this.j(function(b){return this.C(b)})};a.prototype.I=function(){return this.J().length===0};return a}();d.h.prototype.get=d.h.prototype.b;d.h.prototype.set=d.h.prototype.d;d.h.prototype.unset=d.h.prototype.C;d.h.prototype.each=d.h.prototype.j;d.h.prototype.keys=d.h.prototype.J;d.h.prototype.clear=d.h.prototype.clear;d.h.prototype.isEmpty=d.h.prototype.I;d.Hash=d.Ra=function(){function a(){a.e.constructor.apply(this,
arguments);X.apply(this,arguments)}var b,c,e,f;w(a,d.a);X=d.h;a.prototype.k({b:d.h.prototype.b,d:d.h.prototype.d,C:d.h.prototype.C});a.prototype.k("isEmpty",{b:function(){return this.I()}});f=["hasKey","equality","each","keys"];c=0;for(e=f.length;c<e;c++){b=f[c];a.prototype[b]=d.h.prototype[b]}return a}();d.SimpleSet=d.f=function(){function a(){this.n=new d.h;this.length=0;arguments.length>0&&this.add.apply(this,arguments)}var b,c,e,f;a.prototype.pb=function(g){return this.n.Da(g)};f=["get","set",
"unset"];c=0;for(e=f.length;c<e;c++){b=f[c];a.prototype[b]=d.v.jb[b]}a.prototype.add=function(){var g,h,i,j;h=1<=arguments.length?q.call(arguments,0):[];i=0;for(j=h.length;i<j;i++){g=h[i];if(!this.n.Da(g)){this.n.d(g,k);this.set("length",this.length+1);this.set("isEmpty",k)}}return h};a.prototype.remove=function(){var g,h,i,j,l;h=1<=arguments.length?q.call(arguments,0):[];i=[];j=0;for(l=h.length;j<l;j++){g=h[j];if(this.n.Da(g)){this.n.C(g);i.push(g);this.set("length",this.length-1);this.set("isEmpty",
k)}}return i};a.prototype.j=function(g){return this.n.j(function(h){return g(h)})};a.prototype.I=function(){return this.b("length")===0};a.prototype.clear=function(){return this.remove(this.aa())};a.prototype.aa=function(){return this.n.J()};return a}();d.f.prototype.has=d.f.prototype.pb;d.f.prototype.add=d.f.prototype.add;d.f.prototype.remove=d.f.prototype.remove;d.f.prototype.each=d.f.prototype.j;d.f.prototype.isEmpty=d.f.prototype.I;d.f.prototype.clear=d.f.prototype.clear;d.f.prototype.toArray=
d.f.prototype.aa;d.Set=d.da=function(){function a(){a.e.constructor.apply(this,arguments);Y.apply(this,arguments)}var b,c,e,f;w(a,d.a);Y=d.f;f=["add","remove"];c=0;for(e=f.length;c<e;c++){b=f[c];a.prototype[b]=a.event(d.f.prototype[b])}f=["has","each","isEmpty","toArray","clear"];c=0;for(e=f.length;c<e;c++){b=f[c];a.prototype[b]=d.f.prototype[b]}a.prototype.k("isEmpty",{b:function(){return this.I()},d:A()});return a}();d.SortableSet=d.Ec=function(){function a(b){a.e.constructor.apply(this,arguments);
this.sa={};this.Mb(b)}w(a,d.da);a.prototype.add=a.event(function(){var b;b=d.f.prototype.add.apply(this,arguments);this.ha();return b});a.prototype.remove=a.event(function(){var b;b=d.f.prototype.remove.apply(this,arguments);this.ha();return b});a.prototype.Mb=function(b){this.ha(b);return this.Lb=b};a.prototype.j=function(b){var c,e,f,g,h;g=toArray();h=[];e=0;for(f=g.length;e<f;e++){c=g[e];h.push(b(c))}return h};a.prototype.aa=function(){var b;return(b=this.sa[this.Lb])!=p?b:{Kc:a.e.aa.apply(this,
arguments)}};a.prototype.ha=function(b){var c,e,f;if(b){c=b.split(" ");e=c[0];f=c[1];c=d.da.prototype.aa.call(this);return this.sa[b]=c.sort(function(g,h){var i,j,l;i=(j=d.Q.l.call(g,e).o())!=p?j.valueOf():void 0;j=(l=d.Q.l.call(h,e).o())!=p?l.valueOf():void 0;if((f!=p?f.toLowerCase():void 0)==="desc"){l=[j,i];i=l[0];j=l[1]}return i<j?-1:i>j?1:0})}else{c=[];for(b in this.sa)c.push(this.ha(b));return c}};return a}();d.Request=d.R=function(){function a(){a.e.constructor.apply(this,arguments)}w(a,d.a);
a.prototype.url="";a.prototype.data="";a.prototype.method="get";a.prototype.i("url",function(){return this.Gc=setTimeout(v(function(){return this.send()},this),0)});a.prototype.Fa=a.event(A());a.prototype.loaded=a.event(A());a.prototype.B=a.event(A());a.prototype.error=a.event(A());a.prototype.send=function(){throw"Please source a dependency file for a request implementation";};return a}();d.App=function(){function a(){a.e.constructor.apply(this,arguments)}w(a,d.a);a.oc="";a.Na=function(){var b,c,
e,f,g;c=arguments[0];e=2<=arguments.length?q.call(arguments,1):[];b=this.oc+c;f=0;for(g=e.length;f<g;f++){c=e[f];this.Y("run");c=b+"/"+c+".coffee";new d.R({url:c,type:"html",B:v(function(h){CoffeeScript.eval(h);this.S("run");return this.qc()},this)})}return this};a.Oc=function(){var b;b=1<=arguments.length?q.call(arguments,0):[];return this.Na.apply(this,["controllers"].concat(q.call(b)))};a.Ha=function(){var b;b=1<=arguments.length?q.call(arguments,0):[];return this.Na.apply(this,["models"].concat(q.call(b)))};
a.view=function(){var b;b=1<=arguments.length?q.call(arguments,0):[];return this.Na.apply(this,["views"].concat(q.call(b)))};a.dc=void 0;a.qc=a.Ba(function(){if(this.Xb)return s;d.ka=this;typeof this.dc==="undefined"&&this.d("layout",new d.ea({K:document}));this.tc();return this.Xb=k});return a}();T=/:([\w\d]+)/g;U=/\*([\w\d]+)/g;S=/[:|\*]([\w\d]+)/g;R=/[-[\]{}()+?.,\\^$|#\s]/g;d.Fb={bc:k,L:p,Ma:p,tb:p,action:p,r:p,s:function(a,b){var c,e,f;c=this.action;if(B(c)==="String")if((f=c.indexOf("#"))!==
-1){e=t.T(c.substr(0,f)+"Controller");b=e=d.ka[e];if(b!=p?b.N:void 0)b=b.N();c=b[c.substr(f+1)]}if(c)return c.apply(b||this.r,a)},toString:function(){return"route: "+this.L}};z(d,{P:"#!",bb:[],A:E(function(a,b){var c,e,f,g,h;e=function(i){var j,l,m;if((j=e.r||this)&&j.N)j=j.N();a=e.L;if(i&&!i.url)for(l in i){m=i[l];a=a.replace(RegExp("[:|*]"+l),m)}if(i&&!i.url||!i){d.ka.Wa=a;window.location.hash=d.P+a}return j&&j.kb?j.kb(e,i):e.s(arguments,j)};f=a.replace(R,"\\$&");h=RegExp("^"+f.replace(T,"([^/]*)").replace(U,
"(.*?)")+"(?:\\?.+)?$");for(g=[];(c=S.exec(f))!=p;)c[1]&&g.push(c[1]);z(e,d.Fb,{L:f,Ma:h,tb:g,action:b,r:this});d.bb.push(e);return e}),Z:function(a){return window.location.hash=""+d.P+((a!=p?a.bc:void 0)?a.L:a)}});d.a.A=d.Qa.A=I=d.A;d.a.Z=d.Qa.Z=D=d.Z;z(d.Qa,{tc:function(){var a;if(typeof window!=="undefined"){a=v(function(){var b;b=window.location.hash.replace(d.P,"");if(b!==this.Wa){this.Wa=b;return this.Ib(b)}},this);if(!window.location.hash)window.location.hash=""+d.P+"/";setTimeout(a,0);if("onhashchange"in
window){this.H=a;return window.addEventListener("hashchange",a)}else return this.H=setInterval(a,100)}},hd:function(){if(this.H!=p)if("onhashchange"in window){window.removeEventListener("hashchange",this.H);return this.H=p}else return this.H=clearInterval(this.H)},Ib:function(a){var b;if(b=this.Kb(a)){a=this.Jb(a,b);return b(a)}else a==="/404"?d.ka["404"]():D("/404")},Kb:function(a){var b,c,e,f;f=d.bb;c=0;for(e=f.length;c<e;c++){b=f[c];if(b.Ma.test(a))return b}return p},Jb:function(a,b){var c,e,f,
g,h,i;h=a.split("?");a=h[0];f=h[1];c=b.Ma.exec(a).slice(1);h={url:a};e=0;for(i=c.length;e<i;e++){g=c[e];h[b.tb[e]]=g}if(f!=p){g=f.split("&");c=0;for(e=g.length;c<e;c++){f=g[c];i=f.split("=");f=i[0];i=i[1];h[f]=i}}return h},gd:function(a){return I("/",a)},"404":function(){return new d.ea({$b:"<h1>Page could not be found</h1>",q:"main"})}});d.zc=function(){function a(){a.e.constructor.apply(this,arguments)}w(a,d.a);a.N=function(){if(!this.cb)this.cb=new this;return this.cb};a.Lc=function(b){return(this.Va||
(this.Va=[])).push(b)};a.fd=function(b){return setTimeout(v(function(){if(this.prototype.index)this.prototype.index=this.A("/"+b,this.prototype.index);if(this.prototype.create)this.prototype.create=this.A("/"+b+"/new",this.prototype.create);if(this.prototype.show)this.prototype.show=this.A("/"+b+"/:id",this.prototype.show);if(this.prototype.mb)return this.prototype.mb=this.A("/"+b+"/:id/edit",this.prototype.mb)},this),0)};a.prototype.kb=function(){var b,c,e,f,g,h;f=arguments[0];e=2<=arguments.length?
q.call(arguments,1):[];b=H(f,this);this.fa=s;this.Xa=b;if(c=this.constructor.Va){g=0;for(h=c.length;g<h;g++){b=c[g];b.call(this)}}f.s(e,this);this.fa||this.nc();delete this.fa;return delete this.Xa};a.prototype.Z=function(b){this.fa=k;return D(b)};a.prototype.nc=function(b){var c;if(b==p)b={};this.fa=k;if(!b.view){b.source=t.pa(this.constructor.name.replace("Controller",""))+"/"+this.Xa+".html";b.view=new d.ea(b)}if(c=b.view){c.r||(c.r=this);return c.Ka(function(){return d.g.q("main",c.b("node"))})}};
return a}();d.Db=function(){function a(g){var h;if(g==p)g={};this.ya=new d.Ra;this.Aa=new d.da;a.e.constructor.apply(this,arguments);this.t()||this.empty();h=B(g)==="String"?g:g.id;if(h!=p){this.id=""+h;this.constructor.b("all").add(this)}}var b,c,e,f;w(a,d.a);a.cd=function(){var g,h,i,j,l;h=1<=arguments.length?q.call(arguments,0):[];d.p(this.prototype);i=(g=this.prototype.c).uc||(g.uc=[]);j=0;for(l=h.length;j<l;j++){g=h[j];i.push(g.cc?g:new g(this))}return this};a.k("all",{b:function(){return this.all||
(this.all=new d.da)}});a.k("first",{b:function(){return this.Tc=this.b("all")[0]}});a.k("last",{b:function(){return this.$c=this.b("all")[this.all.length-1]}});a.find=function(g){var h;if(h=this.b("all").b(g))return h;h=new this(""+g);setTimeout(function(){return h.load()},0);return h};a.va=a.event(function(){return this.b("all").clear()});a.ua=a.event(A());a.load=function(g){var h,i,j,l,m,n,o,r,u;this.va();h=v(function(){g!=p&&g.call(this);return this.ua()},this);i=d.D(this.prototype,"storage");
(j=!i.length)||i.shift();n=0;for(r=i.length;n<r;n++){m=i[n];j=j||!m.length;o=0;for(u=m.length;o<u;o++){l=m[o];l.kc(this,h)}}if(j)return h()};a.Qc=function(){var g,h,i,j,l;h=1<=arguments.length?q.call(arguments,0):[];d.p(this.prototype);(g=this.prototype.c).nb||(g.nb={});(i=this.prototype.c).ib||(i.ib={});l=[];i=0;for(j=h.length;i<j;i++){g=h[i];this.prototype.c.nb[g]=function(m){return""+m};l.push(this.prototype.c.ib[g]=function(m){return m})}return l};a.Pa=function(){var g,h,i,j,l,m,n,o,r;g=2<=arguments.length?
q.call(arguments,0,o=arguments.length-1):(o=0,[]);j=arguments[o++];d.p(this.prototype);m=(n=this.prototype.c).xc||(n.xc=[]);if(typeof j==="function")return m.push({J:g,ja:j});else{r=[];n=0;for(o=J.length;n<o;n++){l=J[n];r.push(function(){var u,y;if(i=l.gc(j)){u=0;for(y=i.length;u<y;u++){h=i[u];delete j[h]}return m.push({J:g,wc:new l(i)})}}())}return r}};a.prototype.u(d.w);f=["empty","dirty","loading","loaded","saving"];c=0;for(e=f.length;c<e;c++){b=f[c];a.prototype.t(b)}a.prototype.t("saved",function(){return this.ya.clear()});
a.prototype.d=function(g,h){var i;i=this[g];if(i!==h){a.e.d.apply(this,arguments);this.ya.d(g,i);if(this.t()!=="dirty")return this.Pc()}};a.prototype.k("dirtyKeys",{b:function(){return this.ya}});a.prototype.Ca=function(g){var h,i,j,l,m,n,o;m={};h=d.D(this,"decoders");if(h.length){n=0;for(o=h.length;n<o;n++){j=h[n];for(l in j){i=j[l];m[l]=i(g[l])}}}else for(l in g){h=g[l];m[t.T(l,k)]=h}return this.u(m)};a.prototype.va=a.event(function(){this.Fa();return k});a.prototype.ua=a.event(function(){this.loaded();
return k});a.prototype.Qb=a.event(A());a.prototype.eb=a.event(A());a.prototype.load=function(g){var h,i,j,l,m,n,o,r,u;this.va();h=v(function(){g!=p&&g.call(this);return this.ua()},this);i=d.D(this,"storage");j=!i.length;n=0;for(r=i.length;n<r;n++){m=i[n];j=j||!m.length;o=0;for(u=m.length;o<u;o++){l=m[o];l.xb(this,h)}}if(j)return h()};a.prototype.Pa=function(){var g,h,i,j,l,m,n,o,r,u,y,$,L,M;this.Qb();g=s;L=d.D(this,"validators");n=0;for(u=L.length;n<u;n++){m=L[n];o=0;for(y=m.length;o<y;o++){l=m[o];
j=l.wc;M=l.J;r=0;for($=M.length;r<$;r++){h=M[r];i=new d.Gb(this);j?j.Bb(i,this,h,this.b(h)):l.ja(i,this,h,this.b(h));if(i.paused){this.Y("afterValidation");i.$(v(function(){this.S("afterValidation");return this.eb()},this));g=k}else i.wa&&i.B()}}}return g?s:this.eb()};a.prototype.k({Zc:function(){this.Aa.clear();if(this.Pa()===s)return s;return this.Aa.I()}});return a}();d.Gb=function(){function a(b){this.lc=b;this.wa=k}w(a,d.a);a.prototype.error=function(b){this.lc.Aa.add(b);return this.wa=s};a.prototype.$=
a.event(function(){this.paused=s;return k});a.prototype.B=function(){return this.wa=s};return a}();d.Ua=function(){function a(){var b,c;c=arguments[0];b=2<=arguments.length?q.call(arguments,1):[];this.options=c;a.e.constructor.apply(this,b)}w(a,d.a);a.prototype.Pa=function(){throw"You must override validate in Batman.Validator subclasses.";};a.rb=function(){return t.pa(this.name).replace("_validator","")};a.prototype.rb=function(){return this.constructor.rb()};a.options=function(){var b;b=1<=arguments.length?
q.call(arguments,0):[];d.p(this);return this.c.options?this.c.options.concat(b):this.c.options=b};a.gc=function(b){var c,e,f,g,h,i;e={};f=s;for(c in b){g=b[c];if(~((h=this.c)!=p?(i=h.options)!=p?i.indexOf(c):void 0:void 0)){e[c]=g;f=k}}if(f)return e};return a}();J=d.Fc=[d.Ac=function(){function a(b){var c;if(c=b.ec||b.fc){b.Ga=c[0];b.maxLength=c[1]||-1;delete b.fc;delete b.ec}a.e.constructor.apply(this,arguments)}w(a,d.Ua);a.options("minLength","maxLength","length","lengthWithin","lengthIn");a.prototype.Bb=
function(b,c,e,f){c=this.options;c.Ga&&f.length<c.Ga&&b.error(""+e+" must be at least "+c.Ga+" characters");c.maxLength&&f.length>c.maxLength&&b.error(""+e+" must be less than "+c.maxLength+" characters");if(c.length&&f.length!==c.length)return b.error(""+e+" must be "+c.length+" characters")};return a}(),d.Cc=function(){function a(){a.e.constructor.apply(this,arguments)}w(a,d.Ua);a.options("presence");a.prototype.Bb=function(b,c,e,f){if(this.options.dd&&f==p)return b.error(""+e+" must be present")};
return a}()];d.Ta=function(){function a(b){this.Ha=b;this.sb=t.na(t.pa(this.Ha.name))}a.prototype.cc=k;return a}();d.Bc=function(){function a(){if(ba.call(window,s)>=0)return p;this.id=0;a.e.constructor.apply(this,arguments)}w(a,d.Ta);a.prototype.xb=function(b,c){var e,f,g;g=this.sb;e=b.id;if(g&&e)f=localStorage[g+e];b.Ca(JSON.parse(f));return c()};return a}();d.Dc=function(){function a(){a.e.constructor.apply(this,arguments)}w(a,d.Ta);a.prototype.vb=function(b){var c,e,f,g,h;c={type:"JSON"};h=[b,
this.Ha];f=0;for(g=h.length;f<g;f++){e=h[f];c.url=e.url?typeof e.url==="function"?e.url():e.url:"/"+this.sb+"/"+b.id;if(c.url)break}return c};a.prototype.xb=function(b,c){var e;e=z(this.vb(b),{method:"GET",B:function(f){var g;if(typeof f==="string")f=JSON.parse(f);for(g in f){f=f[g];break}b.Ca(f);return c()}});return new d.R(e)};a.prototype.kc=function(b,c){var e;e=z(this.vb(record),{B:function(f){var g,h,i,j;if(typeof f==="string")f=JSON.parse(f);if(!Array.Wc(f))for(g in f){f=f[g];break}i=0;for(j=
f.length;i<j;i++){g=f[i];h=new b(""+g.id);h.Ca(g)}c()}});return new d.R(e)};return a}();d.ea=function(){function a(){a.e.constructor.apply(this,arguments)}var b;w(a,d.a);b={};a.prototype.source="";a.prototype.$b="";a.prototype.K=p;a.prototype.r=p;a.prototype.F=p;a.prototype.q=p;a.prototype.Ka=a.Ba(A());a.prototype.i("source",function(){return setTimeout(v(function(){return this.mc()},this),0)});a.prototype.mc=function(){var c;if(c=this.b("source"))return b[c]?this.d("html",b[c]):new d.R({url:"views/"+
this.source,type:"html",B:v(function(e){b[c]=e;return this.d("html",e)},this),error:function(){throw"Could not load view from "+url;}})};a.prototype.i("html",function(c){var e;e=this.K||document.createElement("div");e.innerHTML=c;if(this.K!==e)return this.d("node",e)});a.prototype.i("node",function(c){if(c){this.Ka.Sc=s;if(c){this.ab=new d.Sa(c,v(function(){var e,f;e=this.q;if(typeof e==="string")this.q=(f=d.g.ta)!=p?f[e]:void 0;if(this.q&&c){this.q.innerHTML="";this.q.appendChild(c)}return this.Ka(c)},
this),this.F);this.r&&this.ab.F.push(this.r);return this.ab.xa.view=this}}});return a}();d.Sa=function(){function a(c,e,f){this.K=c;this.ja=e;this.$=v(this.$,this);this.start=v(this.start,this);a.e.constructor.apply(this,arguments);this.F=f||[d.ka,new d.a];this.xa=this.F[1];setTimeout(this.start,0)}var b;w(a,d.a);a.prototype.start=function(){this.startTime=new Date;return this.Ja(this.K)};a.prototype.$=function(){this.startTime=new Date;return this.Ja(this.pc)};a.prototype.Wb=function(){this.startTime=
p;return typeof this.ja==="function"?this.ja():void 0};b=/data\-(.*)/;a.prototype.Ja=function(c){var e,f,g,h,i,j,l,m,n,o,r,u,y;if(new Date-this.startTime>50){this.pc=c;setTimeout(this.$,0)}else{if(c.getAttribute){this.xa.K=c;f=this.F;u=c.attributes;n=0;for(o=u.length;n<o;n++){e=u[n];if(h=(y=e.nodeName.match(b))!=p?y[1]:void 0){e=(g=h.indexOf("-"))===-1?typeof(l=d.g.yb)[h]==="function"?l[h](c,e.value,f,this):void 0:typeof(m=d.g.fb)[r=h.substr(0,g)]==="function"?m[r](c,h.substr(g+1),e.value,f,this):
void 0;if(e===s){j=k;break}}}}return(i=this.ic(c,j))?this.Ja(i):this.Wb()}};a.prototype.ic=function(c,e){var f,g;if(!e){f=c.childNodes;if(f!=p?f.length:void 0)return f[0]}typeof c.X==="function"&&c.X();if(f=c.nextSibling)return f;for(f=c;f=f.parentNode;){typeof f.X==="function"&&f.X();if(g=f.nextSibling)return g}};return a}();x=function(a,b){var c,e,f;c=b.split(".")[0];for(f=a.length;f--;){e=a[f];if(e.b!=p&&e.b(c)!=p||e[c]!=p)return e}return C};d.g={yb:{ia:function(a,b,c){var e,f;e=x(c,b);f=k;d.g.ub(a)&&
d.g.ma.hb(a,function(){f=s;e.d(b,a.value);return f=k});return e.i(b,k,function(g){if(f)return d.g.yc(a,g)})},r:function(a,b,c){var e;e=x(c,b).b(b);c.push(e);return a.X=function(){var f;f=c.indexOf(e);return c.splice(f,c.length-f)}},u:function(a,b,c){c.push(d.hc);b=x(c,b).b(b);c.pop();return z(a,b)},rc:function(a,b,c,e,f){var g;g=a.style.display;if(!g||g==="none")g="block";return x(c,b).i(b,k,function(h){return!!h===!f?typeof a.show==="function"?a.show():a.style.display=g:typeof a.Zb==="function"?
a.Zb():a.style.display="none"})},Vc:function(){var a,b;a=1<=arguments.length?q.call(arguments,0):[];return(b=d.g.yb).rc.apply(b,q.call(a).concat([k]))},A:function(a,b,c){var e,f,g,h,i;if(b.substr(0,1)==="/"){h=d.Z.ia(d,b);b=b}else if((g=b.indexOf("#"))!==-1){f=t.T(b.substr(0,g))+"Controller";e=x(c,f);c=e[f];h=c!=p?c.N()[b.substr(g+1)]:void 0;b=h!=p?h.L:void 0}else{e=x(c,b);h=e.b(b);if(h instanceof d.Db){f=t.T(t.na(b))+"Controller";e=x(c,f);c=e[f].N();g=h.id;h=(i=c.show)!=p?i.ia(c,{id:g}):void 0;b=
"/"+t.na(b)+"/"+g}else b=h!=p?h.L:void 0}if(a.nodeName.toUpperCase()==="A")a.href=d.P+(b||"");return d.g.ma.click(a,function(){return h()})},ad:function(a,b,c){return new d.ea({source:b+".html",q:a,F:Array.prototype.slice.call(c)})},Cb:function(a,b){return setTimeout(function(){return d.g.Cb(b,a)},0)},Nc:function(a,b){return setTimeout(function(){return d.g.q(b,a)},0)}},fb:{ia:function(a,b,c,e){var f,g,h,i,j,l;i=c.split(/\s*\|\s*/);c=i.shift();if(i.length){for(l=[];h=i.shift();){f=h.split(" ");h=
f.shift();if(h=d.Vb[h]||d.Yb[h]){if(c.substr(0,1)==="@"){c=c.substr(1);g=x(e,c);c=g.b(c)}j=h.apply(p,[c].concat(q.call(f),[a]));l.push(a.setAttribute(b,j))}}return l}else{g=x(e,c);g.i(c,k,function(m){return b==="value"?a.value=m:a.setAttribute(b,m)});if(b==="value")return d.g.ma.hb(a,function(){j=a.value;if(j==="false")j=s;if(j==="true")j=k;return g.d(c,j)})}},r:function(a,b,c,e){var f;f=x(e,c).b(c);c=new d.a;c[b]=f;e.push(c);return a.X=function(){var g;g=e.indexOf(f);return e.splice(g,e.length-g)}},
event:function(a,b,c,e){var f,g;if(c.substr(0,1)==="@")f=new Function(c.substr(1));else{g=x(e,c);f=g.b(c)}return d.g.ma[b](a,function(){var h;h=a.getAttribute("data-confirm");if(!(h&&!confirm(h)))return f!=p?f.apply(g,arguments):void 0})},Nb:function(a,b,c,e,f,g){b=b.replace(/\|/g," ");return x(e,c).i(c,k,function(h){var i,j;i=a.className;j=i.indexOf(b)!==-1;if(!!h===!g){if(!j)return a.className=""+i+" "+b}else if(j)return a.className=i.replace(b,"")})},ed:function(){var a,b;a=1<=arguments.length?
q.call(arguments,0):[];return(b=d.g.fb).Nb.apply(b,q.call(a).concat([k]))},Uc:function(a,b,c,e,f){var g,h,i,j,l,m,n;m=a.cloneNode(k);m.removeAttribute("data-foreach-"+b);l=a.parentNode;l.removeChild(a);j=new d.Ra;i=Array.prototype.slice.call(e);h=x(e,c).b(c);if(h!=p?h.i:void 0){h.i("add",g=function(o){var r,u,y;y=m.cloneNode(k);j.d(o,y);r=new d.Sa(y,function(){l.appendChild(y);return f.S("ready")});r.F=u=Array.prototype.slice.call(i);r.xa=d(u[1]);r=new d.a;r[b]=o;u.push(r);return u.push(o)});h.i("remove",
n=function(o){var r;o=j.b(o);return o!=p?(r=o.parentNode)!=p?r.removeChild(o):void 0:void 0});h.i("sort",function(){h.j(n);return setTimeout(function(){return h.j(g)},0)});h.j(function(o){f.Y("ready");return g(o)})}return s}},ma:{click:function(a,b){d.g.addEventListener(a,"click",function(c){b!=p&&b.apply(this,arguments);return c.preventDefault()});if(a.nodeName.toUpperCase()==="A"&&!a.href)return a.href="#"},hb:function(a,b){return d.g.addEventListener(a,function(){switch(a.nodeName.toUpperCase()){case "TEXTAREA":return"keyup";
case "INPUT":return a.type.toUpperCase()==="TEXT"?"keyup":"change";default:return"change"}}(),b)},submit:function(a,b){return d.g.ub(a)?d.g.addEventListener(a,"keyup",function(c){if(c.keyCode===13){b.apply(this,arguments);return c.preventDefault()}}):d.g.addEventListener(a,"submit",function(c){b.apply(this,arguments);return c.preventDefault()})}},Cb:function(a,b){var c,e;((c=d.g).ta||(c.ta={}))[a]=b;if(c=(e=d.g.db)!=p?e[a]:void 0){b.innerHTML="";if(c)return b.appendChild(c)}},q:function(a,b){var c,
e;((c=d.g).db||(c.db={}))[a]=b;if(c=(e=d.g.ta)!=p?e[a]:void 0){c.innerHTML="";if(b)return c.appendChild(b)}},yc:function(a,b){var c;c=arguments.length>1;switch(a.nodeName.toUpperCase()){case "INPUT":return c?a.value=b:a.value;default:return c?a.innerHTML=b:a.innerHTML}},ub:function(a){var b;return(b=a.nodeName.toUpperCase())==="INPUT"||b==="TEXTAREA"},addEventListener:function(a,b,c){return a.addEventListener?a.addEventListener(b,c,s):a.attachEvent("on"+b,c)}};P=/(?:^|_)(.)/g;Q=/(^|\s)([a-z])/g;V=
/([A-Z]+)([A-Z][a-z])/g;W=/([a-z\d])([A-Z])/g;t=d.Yb={T:function(a,b){a=a.replace(P,function(c,e){return e.toUpperCase()});return b?a.substr(0,1).toLowerCase()+a.substr(1):a},pa:function(a){return a.replace(V,"$1_$2").replace(W,"$1_$2").replace("-","_").toLowerCase()},sc:function(a){return a.substr(-3)==="ies"?a.substr(0,a.length-3)+"y":a.substr(-1)==="s"?a.substr(0,a.length-1):a},na:function(a,b){if(b){if(a===1)return b}else b=a;return b.substr(-1)==="y"?""+b.substr(0,b.length-1)+"ies":""+b+"s"},
Sb:function(a){return a.replace(Q,function(b,c,e){return c+e.toUpperCase()})}};t.capitalize=t.Sb;t.underscore=t.pa;t.singularize=t.sc;t.pluralize=t.na;t.camelize=t.T;d.helpers=t;d.Vb={};d.hc=new d.a;C=typeof exports!=="undefined"&&exports!==p?(exports.Batman=d,global):(window.Batman=d,window);z(C,d.Q);d.exportHelpers=function(a){a.$mixin=z;a.$unmixin=O;a.$route=I;a.$redirect=D;a.$event=F;return a.$eventOneShot=N};d.exportGlobals=function(){return d.Rc(C)};d.R.prototype.send=function(a){return jQuery.Jc(this.b("url"),
{type:this.b("method"),dataType:this.b("type"),data:a||this.b("data"),ld:this.b("username"),bd:this.b("password"),Mc:v(function(){return this.Fa(k)},this),B:v(function(b){this.d("response",b);return this.B(b)},this),error:v(function(b,c,e){this.d("response",e);return this.error(e)},this),complete:v(function(){this.Fa(s);return this.loaded(k)},this)})}}).call(this);
